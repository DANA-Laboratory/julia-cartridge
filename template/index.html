<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Test Index</title>
<script>
    function makeSocket() {
        var socket = new WebSocket('ws://'+location.host+':8000','json');
        socket.addEventListener('open', function() {
            console.log('connected');
            socket.send('testing');
        });
        socket.addEventListener('close', function(err) {
            console.log('closed:', err);
        });
        socket.addEventListener('message', function(msg) {
            console.log('message from server:', msg.data);
        });
        socket.addEventListener('error', function(err) {
            console.log('error:', err);
        });
    }
    function ready(fn) {
        if (document.readyState != 'loading') {
            fn();
        } else {
            document.addEventListener('DOMContentLoaded', fn);
        }
    }
    ready(makeSocket);
</script>
</head>
<body>
    <h1>It works!</h1>
    <p>Check your browser development tools and confirm websocket connection too!</p>
</body>
</html>
